<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pc.seckill.mapper.SuccessSecKillMapper">
    <!--统计商品秒杀结果-->
    <select id="getSecKillCount" resultType="java.lang.Integer">
        SELECT count(1) FROM success_killed WHERE seckill_id=#{secKillId}
    </select>

    <!--清理该商品秒杀结果-->
    <delete id="delResult" parameterType="java.lang.Long">
        DELETE FROM  success_killed WHERE seckill_id=#{secKillId}
	</delete>

    <!--保存商品秒杀结果-->
    <insert id="saveResult" parameterType="com.pc.seckill.common.entity.SuccessKilled">
        insert into success_killed
            <trim prefix="(" suffix=")" suffixOverrides=",">
                <if test="userId != null">
                    user_id,
                </if>
                <if test="seckillId != null">
                    seckill_id,
                </if>
                <if test="state != null">
                    state,
                </if>
                <if test="createTime != null">
                    create_time
                </if>
            </trim>
            <trim prefix="values (" suffix=")" suffixOverrides=",">
                <if test="userId != null">
                    #{userId},
                </if>
                <if test="seckillId != null">
                    #{seckillId},
                </if>
                <if test="state != null">
                    #{state},
                </if>
                <if test="createTime != null">
                    #{createTime}
                </if>
            </trim>
    </insert>
</mapper>